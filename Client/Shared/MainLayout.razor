@inherits LayoutComponentBase
@inject IAuthClient Auth
@inject NavigationManager Nav

<MudThemeProvider IsDarkMode="true"/>
<MudDialogProvider
    Position="DialogPosition.Center"
    CloseButton="true"
    MaxWidth="MaxWidth.ExtraLarge"
    CloseOnEscapeKey="true"
    />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar>
        <MudIconButton Icon="@Icons.Material.Filled.Home"
                       Color="Color.Inherit"
                       @onclick="@ToHome"/>
        <MudIconButton Icon="@Icons.Material.Filled.Login"
                       Color="Color.Inherit"
                       @onclick="@ToLogin"/>
        <MudIconButton Icon="@Icons.Material.Filled.AppRegistration"
                       Color="Color.Inherit"
                       @onclick="@ToRegistration"/>
        <MudSpacer/>
        <MudText Typo="Typo.h6">Family photos</MudText>
        <MudSpacer/>
        <MudIconButton Icon="@Icons.Material.Filled.Logout"
        Color="Color.Inherit"
        @onclick="@Auth.SignOut" />
        <MudIconButton Icon="@Icons.Material.Filled.ShoppingCart"
                       Color="Color.Inherit"
                       @onclick="@ToggleCart"/>
    </MudAppBar>
    
    <MudDrawer @bind-Open="@_cartOpen" Anchor="Anchor.Right" ClipMode="DrawerClipMode.Docked" Variant="DrawerVariant.Persistent" Width="35em">
        <CartView />
    </MudDrawer>
    
    <MudMainContent>
        <MudContainer MaxWidth="MaxWidth.False">
            @Body
        </MudContainer>
    </MudMainContent>
</MudLayout>

@code {
    private bool _cartOpen = true;

    private void ToggleCart() => _cartOpen = !_cartOpen;

    private void ToHome() => Nav.NavigateTo(Routes.Home);
    private void ToLogin() => Nav.NavigateTo(Routes.Login);
    private void ToRegistration() => Nav.NavigateTo(Routes.Register);
}
